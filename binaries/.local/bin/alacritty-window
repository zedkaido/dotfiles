#!/bin/sh

# if ! pgrep -f "Alacritty.*--title alacritty_cmd" > /dev/null; then
#    // OPEN HERE, OTHERWISE IGNORE (for duplicate windows)
# fi

ALACRITTY_FLOATED_TOML=~/.config/alacritty/alacritty-floated.toml

open_launcher_window() {
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-launcher" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/app-open"
}

open_cmd_window() {
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-cmd" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c 'tmux a -t "cmd" || tmux new -s "cmd"'
}

open_ch_window(){
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-ch" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/ch"
}

open_pass_window(){
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-pass" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/pass-copy"
}

open_bookmarks_window(){
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-bookmarks" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/bookmark open"
}

open_snippets_window() {
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-snippets" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/snippet-copy"
}

open_webcam_window() {
	open -n /Applications/Alacritty.app \
		--args --title "alacritty-webcam" \
		--config-file "$ALACRITTY_FLOATED_TOML" \
		-e zsh -c "~/.local/bin/webcam"
}

choose_window() {
	choice=$(printf "launcher\\ncmd\\nch\\npass\\nbookmarks\\nsnipppets\\nwebcam" | fzf)
	case "$choice" in
		launcher) open_launcher_window ;;
		cmd) open_cmd_window ;;
		ch) open_ch_window ;;
		pass) open_pass_window ;;
		bookmarks) open_bookmarks_window ;;
		webcam) open_webcam_window ;;
		*) echo "You must choose a an alacritty window to open (i.e. alacritty-win launcher)" ;;
	esac	
}

case "$1" in
	launcher) open_launcher_window ;;
	cmd) open_cmd_window ;;
	ch) open_ch_window ;;
	pass) open_pass_window ;;
	bookmarks) open_bookmarks_window ;;
	snippets) open_snippets_window ;; 
	webcam) open_webcam_window ;;
	*) choose_window ;;
esac	
